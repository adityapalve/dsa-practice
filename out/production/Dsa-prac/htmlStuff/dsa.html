<!DOCTYPE html>
<html>
<head>
	<title>HeapSort</title>
</head>
<body>
<script type="text/javascript">

var length;

function heapify(arr,i){
	var largest = i;
	var left 	= 2*i + 1;
	var right = 2*i + 2;

	if(left < length && arr[left] > arr[largest]){
		largest = left;
	}

	if(right < length && arr[right] > arr[largest]){
		largest = right;
	}

	if(largest != i){
		swap(arr, i, largest);	
		// console.log('inside heapify')
		heapify(arr,largest);
	}
}

function swap(arr,a, b){
	var temp = arr[a];
	arr[a] = arr[b];
	arr[b] = temp;
}

function sortHeap(arr){
	length = arr.length;

	for(var i = Math.floor(length/2);i >= 0;i -= 1){
		// console.log('hi')
		heapify(arr, i);
	}

	for (var i = arr.length - 1; i > 0; i--) {
		swap(arr, 0, i);
		length--;
		heapify(arr, 0);
	}

}

/*
								 4(0)
								/		\
							1(1)	3(2)		1 = 2*0 + 1 , 2 = 2*0 + 2
							/ 	\	 	\
						1(3)	3(4) 			3 = 2*1 + 1 , 4 = 2*1 + 2

								arr[i]
 							 /			\
			arr[2*i + 1]	arr[2*i + 2]
Step 1 - Create heap
Step 2 -

*/
var array = [3, 0, 2, 5, -1, 4, 1];
var array1 = [15, 13, 4, 5, 21, 0];
sortHeap(array);
console.log(array);

sortHeap(array1);
console.log(array1);

</script>
</body>
</html>